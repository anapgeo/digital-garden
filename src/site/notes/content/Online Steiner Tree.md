---
{"dg-publish":true,"permalink":"/content/online-steiner-tree/","created":"2025-03-25T14:58:23.180+02:00","updated":"2025-03-25T14:59:02.314+02:00"}
---



## Το πρόβλημα

Έστω ότι σας δίνεται ένα **πλήρες**(δηλαδή όλοι οι κόμβοι συνδέονται με τους υπόλοιπους με μια ακμή), μη κατευθυνόμενο γράφημα $G=(V,E)$ με μη αρνητικά κόστη στις ακμές. Επίσης κάνουμε την υπόθεση πως τα κόστη του γραφήματος ικανοποιούν την τριγωνική ανισότητα. Με απλά λόγια αυτό σημαίνει πως αν έχουμε 3 κόμβους, έστω $a,b,c \in V$ τότε ισχύει πως:
- $c(a,a)=c(b,b)=c(c,c)=0$
- $c(a,b)+c(b,c) \leq c(a,c)$ για κάθε $a,b,c \in V$

Δέχεστε μια ακολουθία από τερματικούς κόμβους $t_1,t_1,...,t_k \in V$ οι οποίοι εμφανίζονται με online τρόπο(δηλαδή ένας-ένας). Το ζητούμενο από εσας είναι να συνδέσετε τα τερματικά καθώς εμφανίζονται χρησιμοποιώντας τις ακμές που έχετε στη διάθεση σας. Όταν ένα νέο τερματικό εμφανίζεται καλείστε να αποφασίσετε(ο online αλγόριθμος που θα σχεδιάσετε) πως το τερματικό αυτό θα συνδεθεί με τα υπόλοιπα. Με τον τρόπο αυτό δημιουργείτε ένα υπογράφημα που συνδέει του κόμβους που έχετε μέχρις στιγμής. Στόχος είναι να δημιουργήσετε το φθηνότερο δυνατό υπογράφημα που συνδέει όλους τους τερματικούς κόμβους που λάβατε.

Η απόδοση του online αλγορίθμου σας αυτού θα συγκριθεί με το βέλτιστο offline αλγόριθμο ο οποίος υπολογίζει και αυτός το φθηνότερο δυνατό υπογράφημα, Επειδή τα κόστη είναι μη αρνητικά, το υπογράφημα με το μικρότερο κόστος θα πρέπει να είναι ένα δέντρο T. Το κόστος του δέντρου αυτού θα είναι το άθροισμα των κοστών των ακμών του: $c(T)=\sum_{e\in T}c_e$

![Screenshot_2.png](/img/user/content/Screenshot_2.png)

> Σημείωση: Το minimum Steiner Tree πρόβλημα είναι NP-hard πρόβλημα, σε αντίθεση με το συγγενές πρόβλημα του ελάχιστου συνδετικού δένδρου (minimum Spanning Tree) που επιλύεται σε πολυωνυμικό χρόνο (π.χ. Kruskal, Prim,…)




## Ο άπληστος αλγόριθμος 

Μια πιθανή λύση στο πρόβλημα του online steiner tree είναι να ακολουθήσουμε την εξής απλή και greedy λογική: Από τη στιγμή που μας έρθει ένας κόμβος(τερματικό) εξετάζουμε τα κόστη από κάθε κόμβο που έχουμε ήδη λάβει και συνδέουμε τον νέο κόμβο με το υπόλοιπο υπογράφημα μέσω της ακμής με το μικρότερο κόστος 

Η λογική αυτή φυσικά αρχίζει να υλοποιείται από τον δεύτερο κόμβο και μετά.

Σε μορφή ψευδοκώδικα έχουμε τον εξής αλγόριθμο:


![Screenshot_2 1.png](/img/user/content/Screenshot_2%201.png)

Παρακάτω φαίνεται και ένα αποτέλεσμα του αλγορίθμου 

![Screenshot_3.png](/img/user/content/Screenshot_3.png)



## Ανάλυση του αλγορίθμου

### Το θεώρημα του Euler 

> Σε ένα γράφημα $G=(V,E)$, υπάρχει ένας **κύκλος Euler**(ένα μονοπάτι που ξεκινά από ένα κόμβο και ξανακαταλήγει σε αυτόν ενώ επισκέπτεται κάθε άλλο κόμβο τουλάχιστον μια φορά ενώ μια φορά κάθε ακμή του γραφήματος) αν και μόνον αν:
> - Το **γράφημα** είναι **συνεκτικό**(δηλαδή για κάθε ζεύγος κόμβων υπάρχει μονοπάτι που τους συνδέει)
> - Όλοι οι **κόμβοι** έχουν **άρτιο βαθμό**(δηλαδή από κάθε κόμβο συνδέεται άρτιος αριθμός ακμών)


### Λήμμα 

> Για κάθε $i=1,...,k-1$, η $i$-οστή πιο ακριβή ακμή του Τ έχει κόστος το πολύ $2OPT/i$  όπου $OPT$ είναι το κόστος του βέλτιστου offline Steiner δένδρου (που γνωρίζει τα $k$ τερματικά εξαρχής).

Δηλαδή η πιο ακριβή ακμή του T έχει κόστος το πολύ $2OPT$, η δεύτερη πιο ακριβή έχει κοστος το πολύ $OPT$, η τρίτη πιο ακριβή έχει κοστος το πολύ $2OPT/3$ …

Απόδειξη 


- Έστω $Τ^*$ το βέλτιστο offline Steiner δέντρο και ισχύει $\sum_{e\in Τ^*}c_e=OPT$
- Έστω $H$ το γράφημα που προκύπτει από το $Τ^*$ αν διπλασιάσουμε τις ακμές του $Τ^*$
- αφού ο $|Η|$(βαθμός του $H$) είναι άρτιο, υπάρχει ένας κύκλος Euler $C$ του $H$
- Επομένως το κόστος του $C$ είναι $\sum_{e\in C}c_e=2OPT$ 
- Ο $C$ επισκέπτεται κάθε τερματικό κόμβο τουλάχιστον μια φορά, ενώ μπορεί να επισκέπτεται και μη τερματικούς κόμβους

>Σημείωση: Τερματικούς εννούμε τους κόμβους που μας δίνονται στο online πρόβλημα ενώ μη τερματικοί είναι οι υπόλοιποι κόμβοι του γράφου

- Ας ορίσουμε ως κόστος του τερματικού $t_j$ με $j>1$ ως το κόστος σύνδεσης του $j$ με τον κόμβο $t_k$ με $k<j$ με τον οποίο συνδέθηκε κατα την εκτέλεση του άπληστου αλγορίθμου
- Έστω $s_1,...,s_i$ οι $i$ τερματικοί κόμβοι με τα μεγαλύτερα κόστη
- O $C$ επισκέπτεται τον κάθε τερματικό κόμβο τουλάχιστον μια φορά


 Έστω $C_i$ ο κύκλος που προκύπτει από τον $C$ αν χρησιμοποιήσουμε τις συντομεύσεις** για τις επαναλαμβανόμενες επισκέψεις κάποιου κόμβου:
 - Παρατηρούμε ότι η σειρά επίσκεψης των τερματικών κόμβων στο $C_i$ είναι η ίδια με την σειρά της πρώτης επίσκεψης των κόμβων στο $C$
 - Λόγω της τριγωνικής ανισότητας οι συντομεύσεις έχουν το πολύ το ίδιο κόστος με το μονοπάτι του $C$ που ισούται με $2OPT$

Επειδή ο κύκλος $C_i$ έχει μόνο $i$ ακμές το κόστος της φθηνότερης ακμής είναι μικρότερο ή ίσο από τον μέσο όρο των κοστών του $C_i$ δηλαδή $\min_{e\in C_e} c_e \leq \frac{1}{i} \sum_{c\in C_i} c_e \leq \frac{2}{i}OPT$


> ** : Με τον όρο "συντομεύσεις" εννούμε το εξής:
> - Έστω ότι έχετε ένα γράφημα(σκεφτείτε ότι υπάρχουν και άλλες ακμές που δεν φαίνονται στο γράφημα) με τερματικούς κόμβους $t_1,t_2,t_3$.
> - Όπως φαίνεται και στην εικόνα υπάρχουν και κάποιοι μη τερματικοί κόμβοι
> - Ο κύκλος Euler $C$ περνάει από όλες τις ακμές
> - Ο $C_i$ όμως χρησιμοποιεί τις συντομεύσεις ώστε οι ακμές που περιέχει να είναι μόνο οι $(t_1,t_2),(t_2,t_3),(t_3,t_1)$
> - Αυτές οι ακμές λόγω της τριγωνικής ανισότητας το κόστoς του είναι μικρότερο ή ίσο από το συνολικό μονοπάτι που ακολουθεί ο $C$
> ![Screenshot_5.png](/img/user/content/Screenshot_5.png)



### Ανταγωνιστικότητα Άπληστου Αλγορίθμου

> Θεώρημα: Ο άπληστος αλγόριθμος για το Online Steiner Tree είναι $O(\log k)$-ανταγωνιστικός, όπου $k$ το πλήθος των αιτημάτων.

Απόδειξη 


Ας ορίσουμε ως κόστος του τερματικού $t_j$ με $j>1$ ως το κόστος σύνδεσης του $j$ με τον κόμβο $t_k$ με $k<j$ με τον οποίο συνδέθηκε κατα την εκτέλεση του άπληστου αλγορίθμου.

Ταξινομούμε τις ακμές της άπληστης λύσης από την πιο ακριβή στην πιο φθηνή. Αν χρησιμοποιήσουμε το λήμμα που αποδείξαμε προηγουμένως για $i=1,2,...,k-1$ τότε για το κόστος της άπληστης λύσης $ALG$ έχουμε:

$$
ALG \leq \sum_{i=1}^{k-1}\frac{2}{i}OPT =2OPT \sum_{i=1}^{k-1}\frac{2}{i}\leq 2H_kOPT=O(\log k)OPT
$$


> Σημείωση: Σκεφτείτε πως ο άπληστος λειτουργεί όπως ο $C_i$, επιλέγει δηλαδή πάντα τις συντομεύσεις. Ας πούμε ότι ταξινομήσουμε τις ακμές $e_1,...,e_{k-1}\in V$ σε αύξουσα σειρά με βάση το κόστος τους. Τότε πάμε στην στην πρώτη ακμή $e_1$ είναι ουσιαστικά η πιο φθηνή ακμή του $C_1$, οπότε ισχύει πως το κόστος $c_{e_1}\leq 2OPT/1$. Αντίστοιχα η ακμή $e_2$ είναι ουσιαστικά η πιο φθηνή ακμή του $C_2$, οπότε ισχύει πως το κόστος $c_{e_2}\leq 2OPT/2$. Αν κάνουμε αυτή τη διαδικασία για κάθε ακμή θα προκύψει η σχέση που είδαμε παραπάνω
