---
{"dg-publish":true,"permalink":"/content/anisotites-profiton-prophet-inequalities/","created":"2025-03-25T14:58:23.093+02:00","updated":"2025-03-25T14:59:53.610+02:00"}
---

## Εισαγωγή

Υποθέστε ότι έχετε στη διάθεση σας n κουτιά τα οποία περιέχουν ένα χρηματικό ποσό. Δεν γνωρίζεται την αξία κάθε κουτιού, αλλά σαν είναι γνωστό πως η αξία κάθε κουτιού $i$ είναι μια τυχαία μεταβλητή $X_i$. Γνωρίζουμε όμως εξαρχής την πιθανοτική τιμή $\mathcal{D}_i$ κάθε τέτοιας μεταβλητής.

Τα κουτιά αυτά τίθενται στη διάθεση σας με τη σειρά και βλέπετε την αξία του. Έχετε την επιλογή να κρατήσετε το κουτί και να πάρετε την αξία που περιέχει ή να το αφήσετε. Αν αφήσετε κάποιο κουτί δεν μπορείτε να επιστρέψετε σε αυτό. Υπάρχει κάποια στρτηγική που να μας υπαγορεύει σε ποιο κουτί να σταματήσουμε ώστε να λάβουμε  το μέγιστο δυνατό κέρδος;

Πάμε να δούμε πρώτα ένα παράδειγμα:

Έχετε 2 τυχαίες μεταβλητές(κουτιά) $X_1$ και $X_2$ με τις παρακάτω κατανομές:

- $Χ_1=1$ με πιθανότητα 1
- $Χ_2=1/ε$ με πιθανότητα $ε$ και $X_2=0$ με πιθανότητα $1-ε$ (όπου $ε$ πολύ μικρός θετικός αριθμός) 

Αν σταματήσετε στο πρώτο κουτί το αναμενόμενο κέρδος σας είναι 1. Αν συνεχίσετε στο δεύτερο κουτί το αναμενόμενο κέρδος σας θα είναι $E[X_2]=ε\cdot (1/ε) + (1-ε)\cdot 0 = 1$.  

Ποιο είναι όμως το μέγιστο που θα μπορούσαμε να πετύχουμε ανεξάρτητα από κουτί; Θα πρέπει να βρούμε το $E[X_{max}]=E[max\{X_1,X_2\}]$. Με πιθανότητα $ε$ το μέγιστο είναι η τιμή $1/ε>1$ του κουτιού $X_2$, ενώ με πιθανότητα $1-ε$ το μέγιστο είναι η τιμή $1$ που βρίσκεται στο κουτί $Χ_1$.  Άρα $E[X_{max}]= ε\cdot (1/ε)+(1-ε)\cdot 1=2-ε$ . Αυτή η τιμή σκεφτείτε πως είναι το μέγιστο κέρδος που θα αναμέναμε να λάβουμε αν κάθε φορά βλέπαμε τις αξίες των κουτιών και παίρναμε τη μέγιστη.

Είναι αναμενόμενο πως δεν μπορούμε να πετύχουμε το $E[X_{max}]$. Πως θα μπορούσαμε όμως να το προσεγγίσουμε όσο το δυνατόν καλύτερα;

## Βέλτιστες Στρατηγικές

> Θεώρημα \[Krengel, Sucheston ‘78]: Υπάρχει στρατηγική που επιτυγχάνει αναμενόμενο κέρδος μεγαλύτερο ή ίσο του $\frac{1}{2}E[X_{max}]$

Αποτελέσματα αυτής της μορφής ονομάζονται Ανισότητες  Προφητών καθώς επιτυγχάνουν κέρδος συγκρίσιμο με αυτό που θα πετύχαινε κάποιος "προφήτης" που γνωρίζει το μέλλον(και θα κέρδιζε $E[X_{max}]$).

Ποια είναι όμως η στρατηγική που επιτυγχάνει το αποτέλεσμα του θεωρήματος;

Αρχικά, οι στρατηγικές που εξετάζουμε είναι αλγόριθμοι κατωφλίου, δηλαδή επιλέγεουμε ένα κατώφλι $τ$. Το πρώτο κουτί που θα εμφανιστεί και η τιμή που περιέχει είναι μεγαλύτερη ή ίση με το κατώφλι, το επιλέγουμε. Θα εξετάσουμε 2 διαφορετικές επιλογές κατωφλιών που επιτυγχάνουν το επιθυμητό αποτέλεσμα:

- Επιλογή 1: Διάμεσος (η πιθανότητα το $X_{max}$ να υπερβαίνει το κατώφλι είναι $1/2$ δηλ. $Pr[X_{max}>τ]=1/2$ )
- Επιλογή 2: Μέση τιμή (επιλέγουμε $τ=\frac{1}{2}E[X_{max}]$)

### Γενικά

Ορίζουμε $p_τ=Pr[X_{max}\geq τ]$. Παρατηρούμαι πως $Pr[X_{max}\geq τ]=Pr[\exists X_{i}\geq τ]$, δηλαδή η πιθανότητα $p_τ$, αντιπροσωπεύει την πιθανότητα με την οποία ο αλγόριθμος $ALG_τ$  επιλέγει κάποιο από τα διαθέσιμα κουτιά.

Ένας συμβολισμός που θα μας χρειαστεί στην ανάλυση είναι ο: $(X_i - τ)^+ := \max\{0,X_i -τ\}$

Για το αναμενόμενο κέρδος κάθε αλγορίθμου κατωφλιού $ALG_τ$ έχουμε:

$$
Ε[ALG_τ]= p_τ\cdot τ + \sum_{i=1}^{n} Pr[\bigwedge_{j<i} X_j<τ]\cdot E[(X_i - τ)^+]
$$

> Σημείωση: Αναλύοντας την παραπάνω έκφραση
> - $p_τ=Pr[X_{max}\geq τ]=Pr[\exists X_{i}\geq τ]$  η πιθανότητα με την οποία ο αλγόριθμος $ALG_τ$  που επιλέξαμε επιλέγει κάποιο από τα διαθέσιμα κουτιά.
> - $p_τ\cdot τ$: Με πιθανότητα $p_τ$ θα λάβουμε τουλάχιστον το κατώφλι $τ$  
> - $\sum_{i=1}^{n} Pr[\bigwedge_{j<i} X_j<τ]\cdot E[(X_i - τ)^+]$: Στην έκφραση αυτή για κάθε $i$ υπολογίζει την αναμενόμενη υπέρβαση της τιμής του κατωφλιού από την αξία $X_i$ και την πολλαπλασιάζει με την πιθανότητα αυτή να είναι η πρώτη αξία που ξεπερνά το κατώφλι. Αθροίζοντας για όλες τις αξίες υπολογίζουμε την αναμενόμενη τιμής της υπέρβαση του κατωφλιού από την αξία που θα επιλεγεί.


Είναι προφανές πως ο όρος $Pr[\bigwedge_{j<i} X_j<τ]$, ο οποίος αντιπροσωπεύει την πιθανότητα οι αξίες με δείκτη $j<i$ να είναι μικρότερες του κατωφλιού και να μην έχουν επιλεγεί, είναι μεγαλύτερος από ή ίσος με τον όρο $1-p_τ$ που αντιπροσωπεύει την πιθανότητα να μην υπάρχει καμία αξία που να ξεπερνά το κατώφλι. Επομένως για το αναμενόμενο κέρδος κάθε αλγόριθμου κατωφλιού $ALG_τ$ έχουμε: 
$$
Ε[ALG_τ]= p_τ\cdot τ + \sum_{i=1}^{n} Pr[\bigwedge_{j<i} X_j<τ]\cdot E[(X_i - τ)^+] \geq  p_τ\cdot τ + (1-p_τ)\cdot \sum_{i=1}^{n}E[(X_i - τ)^+] 
$$



### Επιλογή του Διάμεσου 

Έστω $τ$ ο διάμεσος της κατανομής της $X_{max}$ , το οποίο ορίζεται ως το $τ$ που ικανοποιεί τη σχέση $p_τ=Pr[X_{max}\geq τ]=1/2$.  

Αντικαθιστώντας στη γενική σχέση $p_τ=1/2$:


$$Ε[ALG_{τ=median}]\geq \frac{τ}{2}+\frac{1}{2}\cdot \sum_{i=1}^{n}E[(X_i - τ)^+]$$



Με δεδομένη τη σχέση $Χ_{max} \leq τ + \sum_{i=1}^{n}(X_i - τ)^+$ (η οποία είναι εύκολο να αποδειχθεί ότι ισχύει)

έχουμε ότι:

$$
Ε[Χ_{max}] \leq τ + \sum_{i=1}^{n}Ε[(X_i - τ)^+] \Rightarrow Ε[Χ_{max}] - τ \leq  \sum_{i=1}^{n}Ε[(X_i - τ)^+]
$$
άρα για το αναμενόμενο κέρδος του $ALG_{τ=median}$ τελικά ισχύει:


$$Ε[ALG_{τ=median}]\geq \frac{τ}{2}+\frac{1}{2}\cdot (E[X_{max}] - τ)\geq \frac{1}{2}Ε[X_{max}]$$


### Επιλογή Μέσης Τιμής

Αν επιλέξουμε το κατώφλι να είναι η μέση τιμή τότε θα πρέπει να υπολογίσουμε την αναμενόμενη τιμή του $X_{max}$ και να θέσουμε το κατώφλι $τ$ ίσο με το μισό της τιμής αυτής. Δηλαδή $τ=\frac{1}{2}E[X_{max}]$

Αντικαθιστούμε στη γενική σχέση $τ=\frac{1}{2}E[X_{max}]$:

$$
Ε[ALG_{τ=mean}]\geq  p_τ\cdot \frac{1}{2}E[X_{max}]  + (1-p_τ)\cdot \sum_{i=1}^{n}E[(X_i - τ)^+] 
$$

Με δεδομένη τη σχέση $Χ_{max} \leq τ + \sum_{i=1}^{n}(X_i - τ)^+$ (η οποία είναι εύκολο να αποδειχθεί ότι ισχύει)

έχουμε ότι:
$$
Ε[Χ_{max}] \leq τ + \sum_{i=1}^{n}Ε[(X_i - τ)^+] \Rightarrow Ε[Χ_{max}] - τ \leq  \sum_{i=1}^{n}Ε[(X_i - τ)^+]
$$

Επομένως για το αναμενόμενο κέρδος του $ALG_{τ=mean}$ ισχύει:

$$
Ε[ALG_{τ=mean}]\geq  p_τ\cdot \frac{1}{2}E[X_{max}]  + (1-p_τ)\cdot \sum_{i=1}^{n}E[(X_i - τ)^+] \geq p_τ\cdot \frac{1}{2}E[X_{max}]  + (1-p_τ)\cdot (E[X_{max}]-τ)=  p_τ\cdot \frac{1}{2}E[X_{max}]  + (1-p_τ)\cdot \frac{1}{2}E[X_{max}]= \frac{1}{2}E[X_{max}]
$$


